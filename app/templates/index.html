{% extends "base.html" %}

{% block title %}홈 - 와구센{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/slide.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/blog-grid.css') }}">
{% endblock %}

{% block content %}
<!-- 심플한 슬라이드 섹션 -->
<div class="slide-container">
  <div class="slide active">
    <h2>물리학과 구센</h2>
    <p>과학 시뮬레이션과 프로그래밍의 조화</p>
  </div>
  <div class="slide">
    <h2>물리 법칙의 시각화</h2>
    <p>이해해보세요</p>
  </div>
  <div class="slide">
    <h2>기술과 과학의 만남</h2>
    <p>최신 기술로 구현된 물리 시뮬레이션을 경험해보세요</p>
  </div>
  
  <div class="slide-controls">
    <span class="slide-indicator active" data-index="0"></span>
    <span class="slide-indicator" data-index="1"></span>
    <span class="slide-indicator" data-index="2"></span>
  </div>
</div>

<!-- 최신 글 섹션 -->
<section class="section">
  <div class="section-header">
    <h2>최신 글</h2>
  </div>
  
  <div class="main-posts-grid">
    {% if recent_posts %}
      {% for post in recent_posts %}
        <article class="post-card" onclick="window.location.href='{{ url_for('posts.view_by_slug', slug=post.id) }}'">
          <div class="post-card-header">
            <h2 class="post-card-title">
              <a href="{{ url_for('posts.view_by_slug', slug=post.id) }}">{{ post.title }}</a>
            </h2>
            <div class="post-card-meta">
              <div class="post-card-date">
                <i class="far fa-calendar-alt"></i>
                <span>{{ post.date.strftime('%Y년 %m월 %d일') }}</span>
              </div>
            </div>
          </div>
          <div class="post-card-content">
            <div class="post-card-preview">
              {{ post.get_preview(300) }}
            </div>
          </div>
          <div class="post-card-footer">
            <div class="post-card-tags">
              {% for tag in post.tags[:2] %}
                <a href="{{ url_for('posts.filter_by_tag', tag=tag) }}" class="post-card-tag">{{ tag }}</a>
              {% endfor %}
              {% if post.tags|length > 2 %}
                <span class="post-card-tag">+{{ post.tags|length - 2 }}</span>
              {% endif %}
            </div>
          </div>
        </article>
      {% endfor %}
    {% else %}
      <div class="empty-state">
        <p>아직 게시글이 없습니다.</p>
      </div>
    {% endif %}
  </div>
  
  <div class="section-footer">
    <a href="{{ url_for('posts.index') }}" class="btn">모든 글 보기</a>
  </div>
</section>

<!-- 물리 시뮬레이션 섹션 -->
<section class="section">
  <div class="section-header">
    <h2>물리 시뮬레이션</h2>
    <p>물리 법칙을 시각적으로 탐험해보세요.</p>
  </div>
  
  <div class="simulation-container">
    <canvas id="simulationCanvas"></canvas>
  </div>
</section>

<!-- 태그 섹션 -->
<section class="section">
  <div class="section-header">
    <h2>탐색</h2>
    <p>태그로 원하는 콘텐츠를 찾아보세요.</p>
  </div>
  
  <div class="tag-cloud">
    {% for tag, count in popular_tags %}
      <a href="{{ url_for('posts.filter_by_tag', tag=tag) }}" 
         class="tag"
         style="font-size: {{ 80 + count * 10 }}%;">
        {{ tag }}
      </a>
    {% endfor %}
  </div>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/slide-minimal.js') }}"></script>
<script src="{{ url_for('static', filename='js/simulation.js') }}"></script>
{% endblock %}